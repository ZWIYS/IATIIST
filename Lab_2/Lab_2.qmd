---
author: "p.pluvkov@yandex.ru"
format: 
  md:
    output-file: README.md
---

# Основы обработки данных с помощью R и Dplyr
p.pluvkov@yandex.ru
```{r}
#| label: sessionInfo
sessionInfo()
```

## Цель работы

1.  Развить практические навыки использования языка программирования R для обработки данных
2.  Закрепить знания базовых типов данных языка R
3.  Развить практические навыки использования функций обработки данных пакета dplyr – функции select(), filter(), mutate(), arrange(), group\_ by()

## Исходные данные

-   Програмное обеспеченье MacOS
-   RStudio
-   Интерпретатор языка R 4.5.1

## План:

Проанализировать встроенный в пакет dplyr набор данных starwars с помощью языка R и ответить на вопросы 1-12

## Шаги:

### 1. Загрузка библиотеки и просмотр набора данных

```{r}
#| label: dplyr
library(dplyr)
```

```{r}
#| label: starwars
starwars
```

### 2. Овтеты на вопросы:

#### 2.1 Сколько строк в датафрейме?

```{r}
#| label: q1
starwars %>% nrow()
```

#### 2.2 Сколько столбцов в датафрейме?

```{r}
#| label: q2
starwars %>% ncol()
```

#### 2.3 Как просмотреть примерный вид датафрейма?

```{r}
#| label: q3
starwars %>% glimpse()
```

#### 2.4 Сколько уникальных рас персонажей (species) представлено в данных?

```{r}
#| label: q4
unique(starwars$species) -> unique_species
length(unique_species)
```

#### 2.5 Найти самого высокого персонажа.

```{r}
#| label: q5
starwars %>% filter(height == max(height, na.rm = TRUE))
```

#### 2.6 Найти всех персонажей ниже 170

```{r}
#| label: q6
starwars %>% filter(height < 170)

```

#### 2.7 Подсчитать ИМТ (индекс массы тела) для всех персонажей

```{r}
#| label: q7

IMT <- starwars %>% mutate(imt = mass / (height/100)^2)
IMT
```


#### 2.8 Найти 10 самых “вытянутых” персонажей

```{r}
#| label: q8
VIT <- starwars %>% mutate(vit = mass / height)
VIT

```


#### 2.9 Найти средний возраст персонажей каждой расы вселенной Звездных войн.

```{r}
#| label: q9
starwars %>% group_by(species) %>%  summarise(avg_birth_year = mean(birth_year, na.rm = TRUE)) %>% filter(!is.na(avg_birth_year))
```

#### 2.10 Найти самый распространенный цвет глаз персонажей вселенной Звездных воин.
```{r}
#| label: q10
starwars %>% count(eye_color, sort = TRUE) %>% slice(1)

```

#### 2.11 Подсчитать среднюю длину имени в каждой расе вселенной Звездных войн.
```{r}
#| label: q11
starwars %>% filter(!is.na(species)) %>% mutate(name_length = nchar(name)) %>% group_by(species) %>% summarise(avg_name_length = mean(name_length, na.rm = TRUE))
```

## Оценка результата

В ходе решения лабораторной работы были развиты пратические новыки в языке программирования R для обработки данных, закрепленны знания базовых типов данных R и развиты новые навыки в использовании функций паркте dplyr

## Вывод

В ходе решения лабораторной работы были развиты пратические новыки в языке программирования R для обработки данных, закрепленны знания базовых типов данных R и развиты новые навыки в использовании функций паркте dplyr











