---
title: Основы обработки данных с помощью R и Dplyr
author: p.pluvkov@yandex.ru
format: 
  md:
    output-file: README.md
---

## Цель работы

1.  Развить практические навыки использования языка программирования R для обработки данных
2.  Закрепить знания базовых типов данных языка R
3.  Развить практические навыки использования функций обработки данных пакета `dplyr` – функции `select(), filter(), mutate(), arrange(), group_by()`

## Исходные данные

1.  Програмное обеспеченье MacOS
2.  RStudio
3.  Интерпретатор языка R 4.5.1

## Общий план выполнения работы

1.  Проанализировать встроенные в пакет nycflights13 наборы данных с помощью языка R
2.  Выполнить аталитические задачи с помощью языка R

## Шаги

### Шаг 0. Установка nycflights13

```{R}
library(dplyr)
```

```{R}
library(nycflights13)
```

### Шаг 1. Сколько встроенных в пакет nycflights13 датафреймов

```{R}
ls("package:nycflights13")
```

### Шаг 2. Сколько строк в каждом датафрейме?

```{R}
airlines %>% nrow()
airports %>% nrow()
flights %>% nrow()
planes %>% nrow()
weather %>% nrow()
```

### Шаг 3. Сколько столбцов в каждом датафрейме?

```{R}
airlines %>% ncol()
airports %>% ncol()
flights %>% ncol()
planes %>% ncol()
weather %>% ncol()
```

### Шаг 4. Как посмотреть примерный вид датафрейма?

```{R}
airlines %>% glimpse()
airports %>% glimpse()
flights %>% glimpse()
planes %>% glimpse()
weather %>% glimpse()
```

### Шаг 5. Сколько компаний-перевозчиков (carrier) учитывают эти наборы данных (представлено в наборах данных)?

```{r}
length(airlines$carrier)
```

### Шаг 6. Сколько рейсов принял аэропорт John F Kennedy Intl в мае?

```{r}
flights %>% filter(origin == "JFK" & month == 5) %>% nrow()
```

### Шаг 7.Какой самый северный аэропорт?
```{r}
airports %>% arrange(desc(lat)) %>% slice(1)
```

### Шаг 8.Какой самый высокогорный аэропорт?
```{r}
airports %>% arrange(desc(alt)) %>% slice(1)
```

### Шаг 9.Какие бортовые номера у самых старых самолетов?

```{r}
planes %>% arrange(year) %>% select(tailnum) %>% head(10)
```

### Шаг 10. Какая средняя температура воздуха была в сентябре в аэропорту John F Kennedy Intl (в градусах Цельсия).

```{r}
weather %>% filter(!is.na(temp) & month == 9 & origin == 'JFK') %>% summarize(temp_F = mean(temp), temp_C = (5/9) * (temp_F - 32))

```

### Шаг 11. Самолеты какой авиакомпании совершили больше всего вылетов в июне?
```{r}
flights %>% filter(month == 6) %>% count(carrier, sort = TRUE) %>% head(1) %>% left_join(airlines) %>% pull(name)
```

### Шаг 12. Самолеты какой авиакомпании задерживались чаще других в 2013 году?

```{r}
flights %>% filter(year == 2013 & !is.na(dep_delay) & !is.na(arr_delay)) %>% group_by(carrier) %>% summarise(coun = sum(arr_delay > 0)) %>% slice_max(coun, n = 1) %>% left_join(airlines) %>% pull(name)
```

## Оценка результата

1. Развиты практические навыки использования языка программирования R для обработки данных
2. Закреплены знания базовых типов данных языка R
3. Развиты практические навыки использования функций обработки данных пакета `dplyr` – функции `select(), filter(), mutate(), arrange(), group_by()`

## Вывод

В ходе работы развиты практические навыки использования языка программирования R для обработки данных, закреплены знания базовых типов данных языка R, Развиты практические навыки использования функций обработки данных пакета `dplyr` – функции `select(), filter(), mutate(), arrange(), group_by()`












